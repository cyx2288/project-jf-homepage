<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1, maximum-scale=1">
    <meta name="format-detection" content="telephone=no, email=no" />
    <meta content="webkit" name="renderer" />
    <meta name="keywords" content="嘉福平台、嘉福、嘉福福利、税务筹划、员工福利、薪酬管理、企业福利、薪酬福利、福利定制、弹性福利、员工激励、集采、福利培训、礼品采购、职工福利、福利保险、非现金福利、企业福利外包、员工体检、员工健康。"/>
    <meta name="description" content="专注在弹性福利领域，面对企业提供服务，帮助企业发放和管理员工福利、奖励。"/>

    <title>嘉福平台—一站式福利薪酬管理平台</title>
</head>
<body>
    <div id="homepage_scroll_move">
        <div id="content_scroll">
            <!--第一页-->
            <div class="content_block content_show">
                <%-include("../component/mobile/page_one.html")%>
            </div>
            <!--第二页-->
            <div class="content_block">
                <%-include("../component/mobile/page_two.html")%>
            </div>

            <!--第三页-->
            <div class="content_block">
                <%-include("../component/mobile/page_three.html")%>
            </div>

            <!--第四页-->
            <div class="content_block">
                <%-include("../component/mobile/page_four.html")%>
            </div>

            <!--第五页-->
            <div class="content_block">
                <%-include("../component/mobile/page_five.html")%>
            </div>

            <!--第六页-->
            <div class="content_block">
                <%-include("../component/mobile/page_six.html")%>
            </div>

            <!--第七页-->
            <div class="content_block">
                <%-include("../component/mobile/page_seven.html")%>
            </div>
        </div>
    </div>
</body>
<script>
    /*鼠标滚动事件*/
    var scrollBlockMove = {

        init: function (details) {//主要初始化

            var _this = this;

            _this.thisPosition = 0;//初始化现在在第几个页面

            _this.fn = details;//初始化配置

            _this.isXMove = 1;//是否需要移动

            _this.moveDistance=0;//移动的距离

            _this.showheight=30;//可以滚动的高度



            var firstTouchesClientY; //初次点击的位置

            var moveTouchesClientY;//移动一段距离后，停止点的位置

            _this.initPoint();//增加右侧导航


            addEventListener("touchstart",getFirstPosition,false);

            addEventListener('touchend', function(){
                getLastPosition();

                if (_this.isXMove && Math.abs(_this.moveDistance)>_this.showheight) {

                    norXMove();

                    _this.changeScroll( _this.moveDistance)

                }

            },false);

            addEventListener("touchmove",function(event){

                var evt = event? event: window.event;
                evt.preventDefault()

            },false)



            //延迟在变化
            function norXMove() {

                _this.isXMove = 0;

                setTimeout(function () {

                    _this.isXMove = 1;

                }, 300);

            }


            //初始移送的位置
            function getFirstPosition(event){

                var evt = event? event: window.event;

               // evt.preventDefault()

                firstTouchesClientY=parseInt(evt.touches[0].clientY);//当前点击事件距离屏幕顶部的距离(初始位置);

                //console.log(firstTouchesClientY)

            }

            //手指即将离开的位置
            function getLastPosition(event){

                var evt = event? event: window.event;

                //evt.preventDefault()

                moveTouchesClientY=parseInt(evt.changedTouches[0].clientY);//末尾位置;

                _this.moveDistance=moveTouchesClientY- firstTouchesClientY;//最终移动的距离

               // console.log(moveTouchesClientY)


            }


        },

        initPoint: function () {//初始化右侧导航点


            //新建导航点元素
            var obj = document.createElement('div');

            obj.id = 'content_point';

            var thisNum = document.getElementById('content_scroll').getElementsByClassName('content_block').length;

            //通过有几个页面，设置几个导航点
            var thisInnerHtml = '<div>';

            for (var i = 0; i < thisNum; i++) {

                if (i == 0) {

                    thisInnerHtml += '<span class="show"></span>';
                }

                else {

                    thisInnerHtml += '<span></span>';

                }

            }

            thisInnerHtml += '</div>';

            obj.innerHTML = thisInnerHtml;

            //添加元素
            document.getElementById('homepage_scroll_move').appendChild(obj);

            //每个导航点添加监听
            var allPoint = document.getElementById('content_point').getElementsByTagName('span');

            for (var i = 0; i < allPoint.length; i++) {

                allPoint[i].addEventListener('click', this.clickPoint, false)

            }

        },

        clickPoint: function (event) {//绑定的点击事件

            var allPoint = document.getElementById('content_point').getElementsByTagName('div')[0].getElementsByTagName('span');

            //返回点击的是第几个元素
            for (var i = 0; i < allPoint.length; i++) {

                if (this == allPoint[i]) {

                    break;

                }

            }

            var thisNeedMove = i + scrollBlockMove.thisPosition;//需要移动的位置



            //计算移动的绝对值
            if (thisNeedMove != 0) {

                for (var i = 0; i < Math.abs(thisNeedMove); i++) {

                    scrollBlockMove.changeScroll(-thisNeedMove);

                }

            }

        },

        changeScroll: function (position) {//改变位置，参数正负为是否上下移动


            var pointBlock = document.getElementById('content_point');

            var changeBlock = document.getElementById('content_scroll');

            var _this = this;

            var thisNum = document.getElementById('content_scroll').getElementsByClassName('content_block').length - 1;

            //如果向下滚动，则不能超过最大页面个数
            if (parseFloat(position) < 0) {

                _this.thisPosition > -thisNum ? _this.thisPosition-- : _this.thisPosition = -thisNum;

            }

            //如果向上滚动，不能超过最上面
            else if (parseFloat(position) > 0) {

                _this.thisPosition < 0 ? _this.thisPosition++ : _this.thisPosition = 0;

            }

            _this.changeTransform(document.getElementById('content_scroll'), 100 * this.thisPosition + '%');//变化到指定位置

            //变化点的位置
            pointBlock.getElementsByClassName('show')[0].className = pointBlock.getElementsByClassName('show')[0].className.replace('show', '');

            pointBlock.getElementsByTagName('span')[-this.thisPosition].className += ' show';

            //变化页面的位置
            changeBlock.getElementsByClassName('content_show')[0].className = changeBlock.getElementsByClassName('content_show')[0].className.replace(' content_show', '');

            changeBlock.getElementsByClassName('content_block')[-this.thisPosition].className += ' content_show';

        },

        changeTransform: function (ele, num) {//位置变化的方法

            ele.style.transform = 'translateY(' + num + ')';

            ele.style.oTransform = 'translateY(' + num + ')';

            ele.style.mozTransform = 'translateY(' + num + ')';

            ele.style.webkitTransform = 'translateY(' + num + ')';

            ele.style.msTransform = 'translateY(' + num + ')'

        }

    };

    //嘉福客服模块
    var jfCustomerService = {

        init: function (service, token) {//初始化

            if (!$("#MEIQIA-PANEL-HOLDER").length > 0) {

                var isIosProduct = 0;                                                                                         //判断是不是可能出现位移的页面

                function jfServiceInit(visibility) {

                    jfServiceSwitch(visibility);

                    if (browser.os.iOS && $('html').hasClass('ovfHiden') && $('body').hasClass('ovfHiden')) {                    //解决ios10的在详情页聊天移位问题。
                        isIosProduct = 1;
                        $(document).scrollTop(0);
                    }
                }

                function jfServiceSwitch(visibility) {

                    if (visibility === 'visible') {

                        if (isIosProduct) {                                                                                   //解决ios10的在详情页聊天移位问题。
                            $('html').removeClass('ovfHiden');
                            $('body').removeClass('ovfHiden')
                        }

                        $('#MEIQIA-PANEL-HOLDER').show().removeClass('hide').addClass('show');
                        setTimeout(
                            function () {
                                $('#MEIQIA-PANEL-HOLDER').removeClass('show');
                            }
                            , 300);

                    }

                    else {
                        // 你可以根据自己的需求编写相应的代码
                        $('#MEIQIA-PANEL-HOLDER').addClass('hide').css('left', 0).css('z-index', 600);
                        setTimeout(
                            function () {
                                $('#MEIQIA-PANEL-HOLDER').hide();

                            }
                            , 300);

                        if (isIosProduct) {                                                                                   //解决ios10的在详情页聊天移位问题。
                            $('html').addClass('ovfHiden');
                            $('body').addClass('ovfHiden');
                            $(document).scrollTop(0);
                        }

                    }
                }

                (function (m, ei, q, i, a, j, s) {
                    m[i] = m[i] || function () {
                            (m[i].a = m[i].a || []).push(arguments)
                        };
                    j = ei.createElement(q);
                    s = ei.getElementsByTagName(q)[0];
                    j.async = true;
                    j.charset = 'UTF-8';
                    j.src = '//static.meiqia.com/dist/meiqia.js';
                    s.parentNode.insertBefore(j, s);
                })(window, document, 'script', '_MEIQIA');
                _MEIQIA('entId', '39750');

                // 在这里开启手动模式（必须紧跟美洽的嵌入代码）
                _MEIQIA('manualInit');


                // 你可以自己的代码中选择合适的时机来调用手动初始化
                _MEIQIA('withoutBtn');//不使用插件按钮
                _MEIQIA('allSet', jfServiceInit);//初始设置
                _MEIQIA('getPanelVisibility', jfServiceSwitch);//改变状态后设置
                _MEIQIA('init');//初始化

                //指定客服
                _MEIQIA('assign', {
                    groupToken: token
                });
                //用户信息导入
                _MEIQIA('metadata', service);
            }
        },
        click: function () { //导入使用
            _MEIQIA('showPanel')
        }
    };

    //嘉福客服模块结束

    jfCustomerService.init({//用户信息
        name: '阿陈',// 名字
        address: '西伯利亚',// 地址
        email: '1313@qq.com',// 邮箱
        age: '16',// 年龄
        tel: '110',// 电话
        comment: '很帅',// 备注
        gender: '男',// 性别
        qq: '1234567',// QQ
        weibo: '',// 微博
        weixin: '',// 微信
        '公司名称':'上海淘略数据有限公司',
        '公司编号':'123ksuhdaf891274',
        '员工编号':'1234567890123456'
    })
    /*上拉以及下拉插件*/
    /*2017/3/8
     * 谯丹*/
    var jfFrameDrag = {

        dragEleshow: function (details) {/*出现方法*/

            var _this = this;

            _this.moveDistance = details.moveDistance || 0;//向上移动的距离

            _this.initDistance=details.initDistance || '100%';//初始状态的位置,默认向上-100%或者向下移动100%

            _this.targetButton=details.targetButton || 0;//点击的目标元素。ID选择器

            _this.targetDragName = details.targetDragName || 0;//出现的目标元素；calss选择器

            _this.hideButton = details.hideButton || 'check_btn';//关闭的按钮,class选择器

            _this.showFn = details.showFn || 0;//同时出现的函数

            _this.hideFn = details.hideFn || 0;//同时关闭的函数




            var $main = document.getElementsByClassName('frame-main')[0];//主体

            var $drag = document.getElementsByClassName('mask_drag')[0];//阴影


            if (_this.targetDragName) {//如果当前页面有多个上拉框，则选择器需要的哪个

                var $main = document.getElementsByClassName(_this.targetDragName)[0].getElementsByClassName('frame-main')[0];//主体

                var $drag = document.getElementsByClassName(_this.targetDragName)[0].getElementsByClassName('mask_drag')[0]; //阴影

            }

            /*出现的方法*/
            _this.run=function(){


                if ($main.style.display = "none") {//如果为隐藏，下拉框收起中

                    document.getElementsByTagName("body")[0].className = "ovfHiden";//页面禁止滚动
                    document.getElementsByTagName("html")[0].className = "ovfHiden";//页面禁止滚动

                    $drag.style.display = "block";
                    $main.style.display = 'block';

                    setTimeout(function () {

                        $drag.style.opacity = "0.6";

                        $main.style.transform = "translate3d(0," + _this.moveDistance + ",0)";//到指定展现位置
                        $main.style.webkitTransform = "translate3d(0," + _this.moveDistance + ",0)";


                    }, 10);


                    if (_this.showFn) {
                        _this.showFn(); //执行 弹出时加入的函数参数
                    }

                }

            };
            /*出现的方法*/
            _this.stop=function(){

                if ($main.style.display = "block") {

                    $main.style.transform = "translate3d(0,"+ _this.initDistance + ",0)";//到达平滑过渡开始位置
                    $main.style.webkitTransform = "translate3d(0,"+ _this.initDistance + ",0)";

                    //阴影透明度变化之后再发生效果
                    $drag.style.opacity = "0";


                    document.getElementsByTagName("body")[0].className = "";//页面可以滚动
                    document.getElementsByTagName("html")[0].className = "";//页面可以滚动


                    if (_this.hideFn) {
                        _this.hideFn(); //执行 关闭时加入的函数参数
                    }

                }

                $drag.addEventListener('webkitTransitionEnd', opacityChange, false);
                $drag.addEventListener('transitionend', opacityChange, false);

                function opacityChange() {

                    $drag.style.display = "none";

                    $drag.removeEventListener('webkitTransitionEnd', opacityChange, false);
                    $drag.removeEventListener('transitionend', opacityChange, false); //取消平滑过渡后的绑定事件

                } //事件解绑


                $main.addEventListener('webkitTransitionEnd', listChange, false);
                $main.addEventListener('transitionend', listChange, false); //主体的过渡事件


                function listChange() {

                    $main.style.display = "none";

                    $main.removeEventListener('webkitTransitionEnd', listChange, false);
                    $main.removeEventListener('transitionend', listChange, false); //事件解绑

                }
            };


            if(_this.targetButton){//如果点击元素存在
                /*目标按钮点击出现*/
                document.getElementById(_this.targetButton).onclick=function(){

                    _this.run();
                };
            }



            /*阴影点击关闭*/
            $drag.addEventListener("click",function(){
                _this.stop()
            },false);

            /*关闭按钮点击关闭*/
            $main.getElementsByClassName( _this.hideButton)[0].onclick=function(){
                _this.stop()
            }
        }

    };

    /*上拉下拉插件结束*/

    var jfshakeMove = {

        init: function () {

            //判断是否是手机晃动事件
            if (window.DeviceOrientationEvent) {

                window.addEventListener('deviceorientation', this.mouseMove.bind(this), false);
            }

        },

        mouseMove: function (event) {
            var _this = this;
            var event = event || window.event;

            var delA = event.alpha;    // alpha轴偏转角
            var delB = event.beta;    // beta轴偏转角（绕x轴旋转的角度）
            var delG = event.gamma;    // gamma轴偏转角(绕y轴旋转的角度)

            if (delA != null || delB != null || delG != null) {
                var allMoveEle = document.getElementsByClassName('moveEle');

                //初始化移动的权重
                var distanceW = 1;

                for (var i = 0; i < allMoveEle.length; i++) {

                    //获取当前元素权重
                    distanceW = allMoveEle[i].getAttribute('data-distanceW');

                    if(Math.abs(delG)>80||Math.abs(delB)>160){//设置临界点变动


                    }else {
                        //设置偏移
                        this.transformAll(allMoveEle[i],(delG/1.5)*distanceW,(delB/3)*distanceW);
                    }

                    //初始化偏移
                    distanceW = 1;

                }

            }

        },

        //通用变化兼容性
        transformAll: function (ele, disX, disY) {

            setTimeout(function(){
                ele.style.transform = 'translate(' + disX + 'px,' + disY + 'px)';

                ele.style.webkitTransform = 'translate(' + disX + 'px,' + disY + 'px)';

                ele.style.oTransform = 'translate(' + disX + 'px,' + disY + 'px)';

                ele.style.msTransform = 'translate(' + disX + 'px,' + disY + 'px)';

                ele.style.mozTransform = 'translate(' + disX + 'px,' + disY + 'px)';

            },200);
        }

    }

    jfshakeMove.init()


    scrollBlockMove.init()

    //确认订单上拉框

    var orderDragUp=new jfFrameDrag.dragEleshow({

          "targetButton":"service_telephone",//点击的目标元素。ID选择器

       // "targetDragName":"frame_checkorder",//出现的目标元素，calss选择器

        "hideButton":"drop_down_delete"//关闭按钮，class选择器

    });
    function judgeBrowserJump() {

        if (browser.supplier.wechat) {  //判断是否微信内置浏览器

            window.location.href = "https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MjM5Nzk2OTQ1MA==#wechat_redirect";

        }
        else {
            window.location.href = "http://www.jia-fu.cn/download/app";
        }

    }

    //判断是否为安卓 过渡平滑
    addEventListener('load', function () {

        if (browser.os.android) {

            $('.moveEle').css("transition", "transform 0.3s linear")
        }


    }, false);


</script>
</html>